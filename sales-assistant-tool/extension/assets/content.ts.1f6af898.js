import{s,P as a,h as l}from"./common.bf752ed5.js";async function c(t){try{let o=await fetch(`http://localhost:${a}/parse-text`,{method:"POST",body:JSON.stringify(t),headers:l});if(o.ok)return await o.json()}catch(o){console.error(o)}return""}function d(t){return t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function p(t){var r;let o=(r=window.getSelection())==null?void 0:r.toString();!o||(t.preventDefault(),c({raw_text:d(o),url:document.location.href}).then(n=>{var i;console.log("parsedText:",n),n&&navigator.clipboard.writeText(n.raw_text),chrome.storage.local.set({parsedText:n}),(i=window.getSelection())==null||i.removeAllRanges();let e=document.createElement("p");e.innerText="Text selected! Now open extension to modify and save it.",e.style.position="fixed",e.style.top="20px",e.style.left="20px",e.style.height="60px",e.style.backgroundColor="black",e.style.color="white",e.style.padding="1rem",e.style.borderRadius="8px",e.style.zIndex="calc(infinity)",e.style.fontSize="16px !important",document.body.appendChild(e),setTimeout(()=>e.remove(),5e3)}))}chrome.storage.sync.get(["extension"],function(t){s().then(o=>{o.message!="failed"&&(t.extension==null&&(t.extension=!0,chrome.storage.sync.set({extension:!0})),typeof t.extension=="boolean"&&t.extension===!0&&(chrome.storage.local.set({pageUrl:document.location.href}),chrome.storage.local.set({parsedText:null}),document.addEventListener("contextmenu",p)))})});
